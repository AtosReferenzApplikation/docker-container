<!-- <ngx-spinner type="ball-scale-ripple-multiple" size="medium">
  <p style="color: white"> Signing in... </p>
</ngx-spinner> -->
<!-- type="pacman" -->
<div id="card-body-chat">
  <div class="chat-head" *ngIf="!circuitService.call">
    <div id="customerInfo">
      {{customer.name}} {{customer.surname}} ist <i>{{status}}</i><br>
    </div>
    <div id="convBtn">
      <button type="button" class="btn btn-primary rounded-circle">
        <fa-icon [icon]="faVideo"></fa-icon>
      </button>
      <button type="button" class="btn btn-primary rounded-circle" (click)="startCall(customer)">
        <fa-icon [icon]="faPhone"></fa-icon>
      </button>
    </div>
  </div>
  <div class="chat-head" id="call" *ngIf="circuitService.call">
    <div id="customerInfo">
      {{customer.name}} {{customer.surname}} ist <i>{{status}}</i><br>
    </div>
    <div id="convBtn">
      <button type="button" class="btn btn-primary rounded-circle">
        <fa-icon [icon]="faVideo"></fa-icon>
      </button>
      <button type="button" class="btn btn-danger rounded-circle" (click)="endCall()">
        <fa-icon [icon]="faPhoneSlash"></fa-icon>
      </button>
    </div>
  </div>
  <div #scrollChat id="chat-body" *ngIf="participants">
    <div id="chat-body-content" *ngFor="let thread of threads">
      <div class="message topic" *ngIf="thread.parentItem.type === 'TEXT'">
        <img id="avatar" src="{{getAvatarByUserId(thread.parentItem.creatorId)}}" class="rounded-circle">
        <div class="card card-body talk-bubble topic">
          <div *ngIf="thread.parentItem.text.subject">
            <b>
              <div [innerHTML]="thread.parentItem.text.subject"></div>
            </b>
            <hr>
          </div>
          <div [innerHTML]="thread.parentItem.text.content"></div>
        </div>
      </div>
      <div *ngFor="let text of thread.comments">
        <div class="message text">
          <img id="avatar" src="{{getAvatarByUserId(text.creatorId)}}" class="rounded-circle">
          <div class="card card-body talk-bubble topic">
            <div [innerHTML]="text.text.content"></div>
          </div>
        </div>
      </div>
      <div class="input-group" id="topicInput" *ngIf="thread.parentItem.type === 'TEXT'">
        <div id="img"></div>
        <input #smallMessage type="text" class="form-control" (keyup.enter)="appandMessageToThread(smallMessage.value, thread)" placeholder="Auf dieses Thema antworten"
          aria-label="Auf dieses Thema antworten" aria-describedby="basic-addon2">
        <div class="input-group-append">
          <button class="btn btn-outline-secondary" type="submit"
            (click)="appandMessageToThread(smallMessage.value, thread)">
            <fa-icon [icon]="faPaperPlane"></fa-icon>
          </button>
        </div>
      </div>
    </div>
  </div>
  <div id="chat-footer">
    <div class="input-group mb-3">
      <div class="input-group-prepend">
        <span class="input-group-text" id="basic-addon1">
          <fa-icon [icon]="faEdit"></fa-icon>
        </span>
      </div>
      <input type="text" class="form-control" placeholder="Neues Thema starten" aria-label="Neues Thema starten">
    </div>
  </div>
</div>
